<div class="container-fluid mt-4">
    <div class="d-flex align-items-center border-bottom pb-2">
        <div class="text-white h4 mb-0">All Employees</div>
        <!-- <button class="btn btn-warning ml-auto mr-2" data-toggle="collapse" data-target="#search">Search <i
                class="fa fa-search"></i></button> -->
        <button class="btn btn-danger ml-auto" data-toggle="modal" data-target="#empModal"
            (click)="initForm(null); editMode=false">
            <i class="fa fa-plus"></i> New Employee</button>
    </div>
    <div class="collapse mt-3" id="search">
        <div class="row align-items-end justify-content-end">
            <div>
                <span class="text-white">Search By</span>
                <select class="form-control" [(ngModel)]="option" (change)="setFilter()">
                    <option value="0" selected>id</option>
                    <option value="1">name</option>
                    <option value="2">designation</option>
                    <option value="3">joining date</option>
                    <option value="4">salary</option>
                    <option value="5">skill</option>
                </select>
            </div>
            <div *ngIf="toggle[0]">
                <input type="number" class="form-control" placeholder="Enter Id" [(ngModel)]="searchInput">
            </div>
            <div id="name" *ngIf="toggle[1]">
                <input type="text" class="form-control" placeholder="Name" [(ngModel)]="searchInput">
            </div>
            <div *ngIf="toggle[2]">
                <input type="text" class="form-control" placeholder="designation" [(ngModel)]="searchInput">
            </div>
            <!-- Date -->
            <div *ngIf="toggle[3]">
                <span class="text-white">Min. Date</span>
                <input type="date" class="form-control" placeholder="Min." [(ngModel)]="searchInput">
            </div>
            <div *ngIf="toggle[3]">
                <span class="text-white">Max. Date</span>
                <input type="date" class="form-control" placeholder="Max." [(ngModel)]="searchInputMax">
            </div>
            <!-- Date end -->
            <!-- Salary -->
            <div *ngIf="toggle[4]">
                <span class="text-white">Min. Salary</span>
                <input type="number" class="form-control" placeholder="Min." [(ngModel)]="searchInput">
            </div>
            <div *ngIf="toggle[4]">
                <span class="text-white">Max. Salary</span>
                <input type="number" class="form-control" placeholder="Max." [(ngModel)]="searchInputMax">
            </div>
            <!-- Salary end -->
            <div *ngIf="toggle[5]">
                <input type="text" class="form-control" placeholder="Skill" [(ngModel)]="searchInput">
            </div>
            <button class="btn bg-color-p text-white"><i class="fa fa-search"></i></button>
        </div>
    </div>

    <div class="row mb-4">

        <div class="col-lg-3">
            <div class="filter-box bg-white mt-4">
                <div class="h5 bg-color-light px-4 py-3">Filter By</div>
                <div class="px-4 text-secondary" id="accordion">

                    <div class="border-bottom py-3">
                        <div class="d-flex justify-content-between" data-toggle="collapse" data-target="#id"
                            (click)="setFilter('id')">
                            <div class="h6">Employee Id</div>
                            <div><i class="fa fa-angle-down fa-lg"></i></div>
                        </div>
                        <div class="collapse" id="id" data-parent="#accordion">
                            <input type="number" class="form-control" placeholder="Enter Id" [(ngModel)]="searchInput">
                        </div>
                    </div>

                    <div class="border-bottom py-3">
                        <div class="d-flex justify-content-between" data-toggle="collapse" data-target="#name"
                            (click)="setFilter('firstName')">
                            <div class="h6">Name</div>
                            <div><i class="fa fa-angle-down fa-lg"></i></div>
                        </div>
                        <div id="name" class="collapse" data-parent="#accordion">
                            <input type="text" class="form-control" placeholder="Name" [(ngModel)]="searchInput">
                        </div>
                    </div>

                    <div class="border-bottom py-3">
                        <div class="d-flex justify-content-between" data-toggle="collapse" data-target="#designation"
                            (click)="setFilter('designation')">
                            <div class="h6">Designation</div>
                            <div><i class="fa fa-angle-down fa-lg"></i></div>
                        </div>
                        <div id="designation" class="collapse" data-parent="#accordion">
                            <input type="text" class="form-control" placeholder="designation" [(ngModel)]="searchInput">
                        </div>
                    </div>

                    <div class="border-bottom py-3">
                        <div class="d-flex justify-content-between" data-toggle="collapse" data-target="#date"
                            (click)="setFilter('doj')">
                            <div class="h6">Joining Date</div>
                            <div><i class="fa fa-angle-down fa-lg"></i></div>
                        </div>
                        <div id="date" class="collapse" data-parent="#accordion">
                            <input type="date" class="form-control" placeholder="Min." [(ngModel)]="searchInput" (change)="setMaxInput()">
                            <div class="m-0 text-center text-danger small font-weight-bold">to</div>
                            <input type="date" class="form-control mt-1" placeholder="Max." [(ngModel)]="searchInputMax">
                        </div>
                    </div>

                    <div class="border-bottom py-3">
                        <div class="d-flex justify-content-between" data-toggle="collapse" data-target="#salary"
                            (click)="setFilter('salary')">
                            <div class="h6">Salary</div>
                            <div><i class="fa fa-angle-down fa-lg"></i></div>
                        </div>
                        <div class="collapse" id="salary" data-parent="#accordion">
                            <input type="number" class="form-control" placeholder="Min." [(ngModel)]="searchInput" (change)="setMaxInput()">
                            <div class="m-0 text-center text-danger small font-weight-bold">to</div>
                            <input type="number" class="form-control" placeholder="Max." [(ngModel)]="searchInputMax">
                        </div>
                    </div>

                    <div class="border-bottom py-3">
                        <div class="d-flex justify-content-between" data-toggle="collapse" data-target="#skill"
                            (click)="setFilter('skills')">
                            <div class="h6">Skill</div>
                            <div><i class="fa fa-angle-down fa-lg"></i></div>
                        </div>
                        <div class="collapse" id="skill" data-parent="#accordion">
                            <input type="text" class="form-control" placeholder="Skill" [(ngModel)]="searchInput">
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="col-lg-9">
            <div class="row">
                <div class="col-md-6 col-xl-4 mt-4"
                    *ngFor="let user of allData | filter: field : searchInput : searchInputMax">
                    <div class="card h-100 bg-white">
                        <div class="h6 mb-0 bg-color-light text-dark p-2 d-flex align-items-center">
                            <div class="img-holder mr-3">
                                <img src="https://static.thenounproject.com/png/17241-200.png" class="img-fluid" alt="">
                            </div>
                            <div>
                                <div>{{user.firstName + ' ' + user.lastName}}</div>
                                <div class="badge badge-info font-weight-normal">{{user.designation}}</div>
                            </div>
                        </div>
                        <div class="badge badge-light w-100" style="font-size: 14px;">EID:  {{user.id}}</div>
                        <div class="card-body py-3 border text-center text-secondary">
                            <a href="mailto:{{user.email}}"><i class="fa fa-envelope"></i> {{user.email}}</a>
                            <div><i class="fa fa-calendar"></i> {{user.doj}}</div>
                            <div class="text-danger font-weight-bold">CTC: &#x20B9;{{user.salary}}</div>
                            <div><span class="skill mt-1 text-dark" *ngFor="let s of user.skills">{{s}} </span></div>
                        </div>
                        <div class="d-flex py-1 bg-light">
                            <div class="w-50 text-center border-right">
                                <i class="fa fa-edit fa-lg btn text-primary" title="edit" (click)="editEmp(user)"
                                    data-toggle="modal" data-target="#empModal"></i>
                            </div>
                            <div class="w-50 text-center">
                                <i class="fa fa-trash fa-lg btn text-danger" title="delete"
                                    (click)="deleteEmp(user)"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- <div class="table-responsive" *ngIf="allData">
        <table class="table table-light mt-3">
            <thead>
                <tr>
                    <th scope="col">id</th>
                    <th scope="col">Name</th>
                    <th scope="col">Designation</th>
                    <th>Email</th>
                    <th scope="col">Salary</th>
                    <th scope="col">DOJ</th>
                    <th scope="col">Skills</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let user of allData | filter: field : searchInput : searchInputMax">
                    <td class="font-weight-bold">{{user.id}}</td>
                    <td>{{user.firstName + ' ' + user.lastName}}</td>
                    <td>{{user.designation}}</td>
                    <td>{{user.email}}</td>
                    <td>&#x20B9;{{user.salary}}</td>
                    <td>{{user.doj}}</td>
                    <td><span class="skill" *ngFor="let s of user.skills">{{s}}</span></td>
                    <td>
                        <i class="fa fa-edit btn text-primary" title="edit" (click)="editEmp(user)" data-toggle="modal" data-target="#empModal"></i>
                        <i class="fa fa-trash btn text-danger" title="delete" (click)="deleteEmp(user)"></i>
                    </td>
                </tr>
            </tbody>
        </table>
    </div> -->

</div>

<!-- Modal -->
<div class="modal fade" id="empModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header bg-color-light">
                <h2 class="modal-title mb-0" id="exampleModalLabel" *ngIf="!editMode">Add New Employee</h2>
                <h2 class="modal-title mb-0" id="exampleModalLabel" *ngIf="editMode">Edit Info</h2>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body bg-light" *ngIf="empForm">
                <form class="row" [formGroup]="empForm">
                    <div class="col-md-6 form-group">
                        <label class="mb-0">First Name</label>
                        <input type="text" class="form-control" placeholder="First name" formControlName="firstName"
                            (change)="setPassword($event)">
                    </div>
                    <div class="col-md-6 form-group">
                        <label class="mb-0">Last Name</label>
                        <input type="text" class="form-control" placeholder="Last name" formControlName="lastName">
                    </div>
                    <div class="col-md-6 form-group">
                        <label class="mb-0">Designation</label>
                        <input type="text" class="form-control" placeholder="Designation" formControlName="designation">
                    </div>
                    <div class="col-md-6 form-group">
                        <label class="mb-0">Salary</label>
                        <input type="number" class="form-control" placeholder="Salary" formControlName="salary">
                    </div>
                    <div class="col-12 form-group">
                        <label class="mb-0">Joining Date</label>
                        <input type="date" class="form-control" placeholder="Enter Date" formControlName="doj">
                    </div>
                    <div class="col-12 form-group">
                        <label class="mb-0">Skills</label>
                        <input type="text" class="form-control" placeholder="Enter Skills" formControlName="skills">
                    </div>
                    <div class="col-12 form-group">
                        <label class="mb-0">Email</label>
                        <input type="email" class="form-control" placeholder="Email" formControlName="email">
                    </div>
                    <div class="col-12 form-group" *ngIf="!editMode">
                        <label class="mb-0">Password</label>
                        <input type="text" class="form-control" placeholder="Password" formControlName="password"
                            disabled>
                    </div>
                </form>
            </div>
            <div class="modal-footer bg-color-light">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" class="btn bg-color-p text-white" (click)="addEmp()"
                    *ngIf="!editMode">Submit</button>
                <button type="submit" class="btn bg-color-p text-white" (click)="saveEdit()"
                    *ngIf="editMode">Update</button>
            </div>
        </div>
    </div>
</div>